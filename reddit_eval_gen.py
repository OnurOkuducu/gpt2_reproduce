# make_subreddit_benchmark.py
import json
import random

REDDIT_SUBS = [
    "programming", "science", "bestof", "Games",
    "Fitness", "DIY", "personalfinance", "philosophy", "history",
]

INSTR = "Guess the subreddit of the following post. Say IDK if you are not sure."

POSTS_20 = {
    "programming": [
        "I'm getting a segmentation fault in C++ when I push_back into a vector. What am I missing?",
        "Why does my Python list comprehension capture the loop variable unexpectedly?",
        "Can someone explain the difference between multiprocessing and multithreading in Python?",
        "What's the cleanest way to structure a REST API in FastAPI with versioning?",
        "My CUDA kernel is slower than expected—how do I reason about memory coalescing here?",
        "Why is my PyTorch training nondeterministic even with fixed seeds?",
        "Is there a good explanation of ownership/borrowing in Rust with practical examples?",
        "How do I design a database schema for many-to-many relationships without pain later?",
        "What are the tradeoffs between protobuf and JSON for internal service communication?",
        "My unit tests are flaky in CI but stable locally—what are common causes?",
        "When should I use async/await in Python vs threads vs processes?",
        "How can I profile a slow function in Python and identify the bottleneck precisely?",
        "I keep getting NaNs in training—what's the standard debug checklist?",
        "What's the difference between LayerNorm and BatchNorm in transformers?",
        "How do you implement beam search efficiently for a language model?",
        "My Docker image is huge—how do I reduce size and speed up builds?",
        "What's a practical way to handle config management across environments?",
        "How do you prevent data leakage in ML pipelines when splitting data?",
        "Why does my gradient explode only after a few thousand steps?",
        "What's the best way to store and stream large datasets for training efficiently?",
    ],
    "science": [
        "What is the strongest evidence we have for dark matter being particle-like?",
        "How does CRISPR reduce off-target edits, and what are the best current methods?",
        "Is there experimental evidence that supports inflation beyond the CMB patterns?",
        "How does quantum entanglement avoid faster-than-light signaling in practice?",
        "What’s the difference between correlation and causation in observational studies?",
        "How do scientists measure the age of the universe, step by step?",
        "Why do we think neutrinos have mass, and how is it measured?",
        "How do vaccines generate long-term immune memory biologically?",
        "Can someone explain Bayesian vs frequentist inference with a concrete example?",
        "How do we detect gravitational waves and separate them from noise?",
        "Why do we believe plate tectonics is the main driver of continental drift?",
        "How do mRNA vaccines get into cells without integrating into DNA?",
        "What exactly is a p-value and why is it often misunderstood?",
        "How do we know exoplanet atmospheres contain specific molecules?",
        "What are the key arguments against the multiverse hypothesis scientifically?",
        "How do double-blind trials work when treatments have noticeable effects?",
        "How do we infer the structure of proteins from experimental data?",
        "Why does time dilation happen in special relativity intuitively and mathematically?",
        "How do researchers quantify uncertainty in climate model projections?",
        "What’s the latest consensus on microplastics and human health risk?",
    ],
    "bestof": [
        "This comment perfectly explains why inflation affects housing prices in the real world.",
        "An insanely detailed breakdown of how modern CPUs execute instructions and why caches matter.",
        "One of the clearest explanations of climate change feedback loops I’ve ever read.",
        "A thoughtful response that changed my mind about universal basic income.",
        "This is the best explanation of why correlation doesn’t imply causation, with examples.",
        "A deep dive into why “just learn to code” is not a complete policy solution.",
        "This person explains the psychology of addiction in a way that’s both empathetic and precise.",
        "A great explanation of how interest rates affect bond prices and why yields move.",
        "This breakdown of the Israeli–Palestinian conflict history is unusually nuanced and sourced.",
        "A long comment explaining why some diets fail, focusing on adherence not willpower.",
        "A detailed explanation of the difference between entropy and “disorder” in physics.",
        "A comment that explains why small changes in incentives can reshape entire systems.",
        "An elegant explanation of why LLMs hallucinate and what “grounding” really means.",
        "A surprisingly good explanation of the Monty Hall problem with intuition.",
        "A comment explaining how to negotiate salary without being adversarial.",
        "This explanation of why some markets become monopolistic over time is excellent.",
        "A careful explanation of why some studies fail to replicate and what that means.",
        "This person explains the difference between GDP and living standards extremely well.",
        "A comment that patiently clarifies a common misconception about taxes and brackets.",
        "A well-argued and respectful explanation of a controversial topic with evidence.",
    ],
    "Games": [
        "The new patch completely changed the PvP meta—what builds are strongest now?",
        "Is Elden Ring actually harder than the earlier Souls games, or just different?",
        "Best controller settings for competitive FPS games to reduce input latency?",
        "Thoughts on the latest Nintendo Direct announcements and the new releases?",
        "I can’t beat this boss—any strategies that don’t require perfect RNG?",
        "Is it worth upgrading to a 144Hz monitor for competitive games?",
        "What’s your favorite roguelike and why does the loop stay addictive?",
        "How do I fix stuttering and shader compilation issues on PC ports?",
        "Are loot boxes basically gambling? How do different countries regulate them?",
        "What’s the best way to optimize graphics settings for higher FPS without ruining visuals?",
        "Why do some games feel better at 60fps than others even at the same fps?",
        "Any recommendations for story-driven games with choices that matter?",
        "How do speedrunners consistently pull off frame-perfect tricks?",
        "What’s the best beginner-friendly fighting game to learn fundamentals?",
        "I keep getting matchmade against higher ranks—how does MMR actually work?",
        "Is keyboard+mouse always better than controller for shooters?",
        "Thoughts on the current state of live-service games and battle passes?",
        "How do I stop tilting in ranked and play consistently?",
        "Any co-op games that are actually fun for 3–4 friends long-term?",
        "Why do some anti-cheat systems cause performance problems on PC?",
    ],
    "Fitness": [
        "Is it better to do cardio before or after lifting for fat loss?",
        "My 12-week progress on push/pull/legs—what should I change next?",
        "How much protein should I eat when cutting and how do I track it?",
        "Tips for improving squat depth without knee pain?",
        "Is creatine safe long term and what’s the best dosing strategy?",
        "How do I build a habit of going to the gym consistently?",
        "What’s a good beginner program for strength without overthinking it?",
        "How do I prevent lower back pain during deadlifts?",
        "What are signs I’m overtraining vs just tired?",
        "How should I structure training if I can only go 3 days a week?",
        "What’s the best way to increase pull-up reps from 3 to 10?",
        "Should I train to failure, and if so how often?",
        "How do I reduce DOMS while still progressing?",
        "Is it normal for strength to drop during a calorie deficit?",
        "What’s a realistic timeline for noticeable muscle gain?",
        "How do I balance running with lifting without hurting recovery?",
        "What’s the best way to track progressive overload?",
        "Any advice for improving mobility for overhead presses?",
        "How do I plan deload weeks and know when I need one?",
        "What’s the best evidence-based approach to recomp?",
    ],
    "DIY": [
        "I built a small bookshelf from reclaimed wood—how do I finish it nicely?",
        "How do I fix a leaking faucet without replacing the whole fixture?",
        "Step-by-step advice for installing vinyl plank flooring in a small room?",
        "What’s the best way to insulate a garage workshop cheaply?",
        "How do I patch drywall cleanly so it doesn’t show after painting?",
        "I want to mount a TV—how do I find studs reliably and avoid mistakes?",
        "How do I fix a door that doesn’t latch because it’s sagging?",
        "What tools are actually worth buying first for a basic DIY setup?",
        "How do I refinish an old table without ruining the veneer?",
        "Best way to stop a squeaky floorboard without tearing up the floor?",
        "How do I install a ceiling fan safely if I’m new to electrical work?",
        "What’s the right way to seal a bathroom to prevent mold around the tub?",
        "How do I build a simple outdoor planter box that won’t rot quickly?",
        "Advice on painting kitchen cabinets for a durable finish?",
        "How do I fix a running toilet that keeps refilling?",
        "What’s the easiest way to remove old caulk and re-caulk cleanly?",
        "How do I repair a chipped tile without replacing the whole thing?",
        "How do I weatherstrip a door to stop drafts in winter?",
        "Any tips for drilling into concrete without cracking it?",
        "How do I safely hang heavy shelves on drywall?",
    ],
    "personalfinance": [
        "Should I pay off my student loans early or invest the difference?",
        "How much should I keep in an emergency fund if my income is variable?",
        "Is refinancing my mortgage worth it at current interest rates?",
        "How do I budget with irregular freelance income month to month?",
        "What’s the best way to start investing as a complete beginner?",
        "Roth IRA vs traditional IRA: how should I decide?",
        "How do I improve my credit score without taking on unnecessary debt?",
        "Is it better to pay down high-interest debt or build savings first?",
        "How should I allocate index funds across US/international/bonds?",
        "What’s a reasonable amount to spend on rent relative to income?",
        "How do I avoid lifestyle creep after getting a raise?",
        "Should I buy a used car in cash or finance at a low APR?",
        "How do I plan for taxes when I’m self-employed?",
        "What’s the simplest way to track expenses without obsessing?",
        "How do I evaluate a job offer’s total compensation fairly?",
        "Is it worth using a financial advisor or just DIY index funds?",
        "What’s the best approach to saving for a down payment?",
        "How do I handle investing if I might need the money within 3 years?",
        "What’s a good strategy for negotiating medical bills and payments?",
        "How do I set financial goals that are realistic and measurable?",
    ],
    "philosophy": [
        "Is free will compatible with determinism, or is it an illusion?",
        "What did Nietzsche mean by eternal recurrence, practically?",
        "Can moral realism exist without objective truth claims?",
        "How does existentialism define personal responsibility?",
        "Is consciousness reducible to physical processes or something else?",
        "What’s the best argument for/against utilitarianism?",
        "Does meaning require religion, or can it be secular?",
        "What is the Ship of Theseus supposed to teach about identity?",
        "Is suffering necessary for a meaningful life?",
        "How do we justify knowledge claims without circularity?",
        "What’s the difference between epistemology and metaphysics?",
        "Is the self a stable entity or a useful illusion?",
        "What is the strongest version of the argument from evil?",
        "Can we have ethics without free will?",
        "What is a good critique of moral relativism?",
        "How do philosophers define ‘truth’ beyond correspondence?",
        "Is there a coherent definition of ‘nothingness’?",
        "What is the best defense of virtue ethics today?",
        "Are emotions a valid source of moral knowledge?",
        "What’s the difference between compatibilism and libertarian free will?",
    ],
    "history": [
        "What caused the fall of the Western Roman Empire, beyond the usual one-liners?",
        "How accurate is the common narrative about the Crusades?",
        "What was daily life like for a peasant in medieval Europe?",
        "What were the long-term effects of the Treaty of Versailles?",
        "How did the Silk Road actually function economically and politically?",
        "What were the main causes of the French Revolution according to historians?",
        "How did the Ottoman Empire manage diversity across regions?",
        "What role did logistics play in major WWII campaigns?",
        "How did printing technology reshape politics in early modern Europe?",
        "What’s the history of banking and how did central banks emerge?",
        "How did the Mongol Empire administer such a huge territory?",
        "What’s the difference between primary and secondary sources in practice?",
        "How did the Cold War shape scientific research funding?",
        "What were the real causes behind the collapse of the Soviet Union?",
        "How did colonial borders contribute to modern conflicts in Africa?",
        "What are common myths about Vikings that historians reject?",
        "How did the Industrial Revolution change labor and urban life?",
        "What made the Roman military so effective for so long?",
        "How did trade influence the rise of city-states in Italy?",
        "How did revolutions in 1848 influence later European politics?",
    ],
}

def main(out_path="reddit_subreddit_benchmark.json", n_per_sub=20, seed=0):
    random.seed(seed)
    data = []
    for sub in REDDIT_SUBS:
        posts = POSTS_20[sub]
        assert len(posts) >= n_per_sub
        for i in range(n_per_sub):
            data.append({
                "instruction": INSTR,
                "post": posts[i],
                "label": sub,
            })
    random.shuffle(data)
    with open(out_path, "w") as f:
        json.dump(data, f, indent=2)
    print(f"Wrote {len(data)} examples to {out_path} ({n_per_sub} per subreddit).")

if __name__ == "__main__":
    main()
